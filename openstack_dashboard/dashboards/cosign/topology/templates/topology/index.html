{% extends 'base.html' %}
{% load i18n %}
{% block title %}{% trans "Topology" %}{% endblock %}
{% block page_header %}
{% include "horizon/common/_page_header.html" with title=_("Topology") %}
{% endblock page_header %}
{% block main %}
{% include "horizon/_messages.html" %}
{% include 'cosign/topology/dependencies.html' %}
{% include 'cosign/topology/buttons.html' %}
{% csrf_token %}
<!-- Topology container-->
{% include 'cosign/topology/add_instances.html' %}
{% include 'cosign/topology/balloon.html' %}
<div id="network" class="initialized col-lg-8 col-md-7 no-padding">
</div>
<div class="col-lg-4 col-md-5">
    <pre id="request"></pre>
</div>
<script>
    jsState = "{{state}}";
    tenant_id = "{{tenant_id}}"; 
    submitted_request = "{{ vdc }}".replace(/&quot;/g,'"');
    submitted_request =  submitted_request.replace(/\:/g, ": ");
    submitted_request = submitted_request.slice(1, submitted_request.length-1);
    submitted_request = JSON.parse(submitted_request);
    console.log(submitted_request);
    flavors = "{{flavors_js}}".replace(/&quot;/g,'"'); 
    flavors = JSON.parse(flavors);
    images = "{{images_js}}".replace(/&quot;/g,'"');
    images = JSON.parse(images);
    if (submitted_request.vnodes == null) {
        console.log("NULL SUBMITED REQUEST");
        jsState = "uninitialized";
    } else {
        jsState = "initialized";
        request = submitted_request;
    }
</script>
{% endblock %}
